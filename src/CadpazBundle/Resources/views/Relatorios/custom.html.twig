<div id="relatoriosArea">
<div>
    Relatório do sistema<br>
    {{ texto }}
    
    
</div>

<table id="tbl_custom" class="display compact" style="width: 100%">
    <thead class="tabela_pequena">
        <tr>
            {% if campos.nome is defined %}<th>Nome</th>{% endif %}
            {% if campos.nomeMae is defined %}<th>Nome da mãe</th>{% endif %}
            {% if campos.sexo is defined %}<th>Sexo</th>{% endif %}
            {% if campos.dataNascimento is defined %}<th>Data de nascimento</th>{% endif %}
            {% if campos.idade_a is defined %}<th>Idade atual</th>{% endif %}
            {% if campos.idade_c is defined %}<th>Idade no atendimento</th>{% endif %}
            {% if campos.cor is defined %}<th>Cor</th>{% endif %}
            {% if campos.estadoCivil is defined %}<th>Est. Civil</th>{% endif %}
            {% if campos.rendaFamiliar is defined %}<th>Renda familiar</th>{% endif %}
            {% if (campos.email) is defined %}<th>Email</th>{% endif %}
            {% if (campos.telefone) is defined %}<th>Telefone</th>{% endif %}
            {% if (campos.endereco) is defined %}<th>Endereco</th>{% endif %}
            {% if (campos.origem) is defined %}<th>Origem</th>{% endif %}
            {% if (campos.beneficios) is defined %}<th>Benefícios Sociais</th>{% endif %}
        </tr>
    </thead>
    <tbody class="tabela_pequena">
        
{% for d in dados %}
    <tr>
        {% if campos.nome is defined %}<td>{{d.nome}}</td>{% endif %}
        {% if campos.nomeMae is defined %}<td>{{d.nomeMae}}</td>{% endif %}
        {% if campos.sexo is defined %}<td>{{d.sexo}}</td>{% endif %}
        {% if campos.dataNascimento is defined %}<td>{{d.dataNascimento | date('d/m/Y')}}</td>{% endif %}
        {% if campos.idade_a is defined %}{% set difference = date(d.dataNascimento|date('Y/m/d')).diff(date('now'|date('Y/m/d'))) %}<td>{{difference.y}}</td>{%endif%}
        {% if campos.idade_c is defined %}{% set difference = date(d.dataNascimento|date('Y/m/d')).diff(date(d.dataCadastro|date('Y/m/d'))) %}<td>{{difference.y}}</td>{% endif %}
        {% if campos.cor is defined %}<td>{{d.cor}}</td>{% endif %}
        {% if campos.estadoCivil is defined %}<td>{{d.estadoCivil}}</td>{% endif %}
        {% if campos.rendaFamiliar is defined %}<td>{{d.rendaFamiliar}}</td>{% endif %}
        {% if campos.email is defined %}<td>{{d.email}}</td>{% endif %}
        {% if campos.telefone is defined %}<td>{{d.telefone}}</td>{% endif %}
        {% if campos.endereco is defined %}<td>{{d.endereco}}</td>{% endif %}
        {% if campos.origem is defined %}<td>{{d.origem}}</td>{% endif %}
        {% if campos.beneficios is defined %}
            <td>
                {% if d.beneficios is iterable %}
                    {{ d.beneficios.peti ? 'PETI, ' : '' }}
                    {{ d.beneficios.agenteJovem ? 'Agente Jovem, ' : '' }}
                    {{ d.beneficios.bolsaFamilia ? 'Bolsa Familia, ' : '' }}
                    {{ d.beneficios.bcp ? 'BCP, ' : '' }}
                    {{ d.beneficios.naoRespondeu ? 'Não respondeu' : '' }}
                    {{ d.beneficios.naoSabe ? 'Não sabe' : '' }}
                    {{ d.beneficios.naoRecebe ? 'Não recebe' : '' }}
                {% else %}
                    {{ d.beneficios }}
                {% endif %}
                        
            </td>
        {% endif %}
    </tr>
{% endfor %}
    
    </tbody>
</table>
</div>

<div class="relButtons">
    <a href="#" id="printRel">Imprimir</a>
</div>

<script>
    $('#tbl_custom').DataTable({
        paging: false,
        searching: false,
        info: false,
        colReorder: true
    });
    
    
    function printContent(el){
        var restorepage = $('body').html();
        var printcontent = $(el).clone();
        $('body').empty().html(printcontent);
        window.print();
        $('body').html(restorepage);
        }
        
        $('#printRel').on('click', function(e) {
        e.preventDefault();
       
        var x = window.open();
        $('.relButtons').hide();
        x.document.open();
        x.document.write( $('#relatoriosArea').clone().html() );
        x.document.close();
        x.print();
        $('.relButtons').show();
        
        /*$('.relButtons').hide();
        printContent('#relatoriosArea');
        $('.relButtons').show();*/
       
        //alert($('#relatoriosArea').html());
    });
</script>